
@model WatermentWebSCADA.ViewModels.MainViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<html>
<head>
    <style>
        .intro {
            background-color: lightgreen;
            color: black;
            margin: 20px 0 20px 0;
            padding: 20px;
            border-radius: 25px;
            height:370px;
        }
    </style>
</head>
</html>

@*<div style='display: block; height: 500px'>left</div>*@

    @*<p>Min ip er @Model.IP[1]</p>

        <p>Og min adresse er @Model.Address</p>

        @foreach (var item in Model.Name)
        {
            <p>@item</p>
        }*@

    <head>
        <meta name="viewport" content="width=device-width" />
        <script type="text/javascript" src="http://canvasjs.com/assets/script/canvasjs.min.js"></script>

    </head>

    @*@{ int x = 0; }*@

    <div>
        @*<h4>@Html.DisplayFor(model => model.Name[x])</h4>*@


        <div class="container">

            <div class="col-sm-4">
                <div class="intro">
                    <h3>Aktive anlegg</h3>

                    <dl class="dl-horizontal">

                        <dt>
                            @Html.DisplayNameFor(model => model.Anlegg)

                        </dt>



                        <dd>
                            @foreach (var skill in Model.Anlegg)
                            {
                            @skill.Name
                            }
                        </dd>




                        <dt>

                            "Land"
                        </dt>

                        <dd>

                            @foreach (var item in Model.Land)
                            {
                            @item.Name
                            }

                        </dd>


                        <dt>
                            "Fylke"

                            @*@Html.DisplayNameFor(model => model.Lokasjoner)*@
                        </dt>

                        <dd>

                            @foreach (var item in Model.Lokasjoner)
                            {
                            @item.County
                            }
                        </dd>
                        <dt>
                            "Postnr"
                        </dt>
                        <dd>
                            @foreach (var item in Model.Lokasjoner)
                            {
                            @item.Postcode
                            }
                        </dd>
                        <dt>
                            "Adresse"
                        </dt>

                        <dd>
                            @foreach (var item in Model.Lokasjoner)
                            {
                            @item.Address
                            }
                        </dd>
                        <dt>
                            "Bruker"
                        </dt>

                        <dd>
                            @foreach (var item in Model.Brukere)
                            {
                            <p> @item.FirstName  @item.LastName</p>
                            }
                        </dd>
                        <dt>
                            "Telefon"
                        </dt>

                        <dd>
                            @foreach (var item in Model.Brukere)
                            {
                            @item.Phone
                            }
                        </dd>
                        <dt>
                            "E-post"
                        </dt>

                        <dd>
                            @foreach (var item in Model.Brukere)
                            {
                            @item.Email
                            }
                        </dd>
                        <dt>
                            "Domene"
                        </dt>

                        <dd>
                            @foreach (var item in Model.Anlegg)
                            {
                            @item.Domain
                            }
                        </dd>
                        <dt>
                            "IP"
                        </dt>

                        <dd>
                            @foreach (var skill in Model.Anlegg)
                            {
                            @skill.IP
                            }
                        </dd>

                        <dt>
                            @*"Domene"*@

                        </dt>

                        <dd>
                            @*@Html.DisplayFor(model => model.Email[x])*@
                        </dd>
                        <dt>
                            @foreach (var skill in Model.Anlegg)
                            {
                            <a href="http://@skill.IP/webvisu/webvisu.htm" target="_blank" class="btn btn-info">Remote Connect &raquo;</a>
                            }

                        </dt>

                        <dd>


                        </dd>


                    </dl>

                </div>


            </div>



            
                <div class="col-sm-8">
                    <div class="intro">

                        <h4><b>Alarms</b></h4>
                       
                        @{int alarmnr = 0;}
                       @foreach (var skill in Model.Alarmer)
                       {
                           alarmnr++;
                      //Teller opp alle i alarmer i tabellen
                       }

                        @foreach (var skill in Model.Alarmer)
                        {
                            
                            
                            
                            //if (alarmnr == 9) break;
                            if (alarmnr < 10)
                            {
                                <p>@skill.Description @skill.AlarmOccured @skill.ProcessValue @skill.Status @skill.equipments.Tag</p>

                                //Skriver ut her hvis det er mindre ennn 10 alarmer
                            }
                            if (alarmnr >= 10)
                            {

                            
                               
                                if (skill == Model.Alarmer.Last())
                                {

                                    //Skriver ut her hvis det er mer enn ti alarmer, for å få de ti siste. 
                                            
                                                    <p>@Model.AlarmList[alarmnr - 10].AlarmOccured @Model.AlarmList[alarmnr - 10].Description @Model.AlarmList[alarmnr - 10].Status @Model.AlarmList[alarmnr - 10].equipments.Tag @Model.AlarmList[alarmnr - 10].equipments.Description </p>
                                               <p>@Model.AlarmList[alarmnr - 9].AlarmOccured @Model.AlarmList[alarmnr - 9].Description @Model.AlarmList[alarmnr - 9].Status @Model.AlarmList[alarmnr - 9].equipments.Tag @Model.AlarmList[alarmnr - 9].equipments.Description </p>
                                                <p>@Model.AlarmList[alarmnr - 8].AlarmOccured @Model.AlarmList[alarmnr - 8].Description @Model.AlarmList[alarmnr - 8].Status @Model.AlarmList[alarmnr - 8].equipments.Tag @Model.AlarmList[alarmnr - 8].equipments.Description </p>
                                               <p>@Model.AlarmList[alarmnr - 7].AlarmOccured @Model.AlarmList[alarmnr - 7].Description @Model.AlarmList[alarmnr - 7].Status @Model.AlarmList[alarmnr - 7].equipments.Tag @Model.AlarmList[alarmnr - 7].equipments.Description </p>
                                                <p>@Model.AlarmList[alarmnr - 6].AlarmOccured @Model.AlarmList[alarmnr - 6].Description @Model.AlarmList[alarmnr - 6].Status @Model.AlarmList[alarmnr - 6].equipments.Tag @Model.AlarmList[alarmnr - 6].equipments.Description </p>
                                               <p>@Model.AlarmList[alarmnr - 5].AlarmOccured @Model.AlarmList[alarmnr - 5].Description @Model.AlarmList[alarmnr - 5].Status @Model.AlarmList[alarmnr - 5].equipments.Tag @Model.AlarmList[alarmnr - 5].equipments.Description </p>
                                                <p>@Model.AlarmList[alarmnr - 4].AlarmOccured @Model.AlarmList[alarmnr - 4].Description @Model.AlarmList[alarmnr - 4].Status @Model.AlarmList[alarmnr - 4].equipments.Tag @Model.AlarmList[alarmnr - 4].equipments.Description </p>
                                             <p>@Model.AlarmList[alarmnr - 3].AlarmOccured @Model.AlarmList[alarmnr - 3].Description @Model.AlarmList[alarmnr - 3].Status @Model.AlarmList[alarmnr - 3].equipments.Tag @Model.AlarmList[alarmnr - 3].equipments.Description </p>
                                              <p>@Model.AlarmList[alarmnr - 2].AlarmOccured @Model.AlarmList[alarmnr - 2].Description @Model.AlarmList[alarmnr - 2].Status @Model.AlarmList[alarmnr - 2].equipments.Tag @Model.AlarmList[alarmnr - 2].equipments.Description </p>
                                            <p>@Model.AlarmList[alarmnr - 1].AlarmOccured@Model.AlarmList[alarmnr - 1].Description@Model.AlarmList[alarmnr - 1].Status@Model.AlarmList[alarmnr - 1].equipments.Tag@Model.AlarmList[alarmnr - 1].equipments.Description</p>
                                       

                                }
                            }


                        }


                        @*>*@

                     
                        
                    </div>

                    </div>

        </div>



                </th>
                <th>
                    <script type="text/javascript">


                            window.onload = function () {
                                var ctx = document.getElementById("chart").getContext("2d");

                                var myChart = new Chart(ctx, {
                                    responsive: true,

                                    type: "line",


                                    data: {
                                        "labels":
                                            [

                                               @{int Idinte2 = 0;}

                                @foreach (var value in Model.Verdier)
                        {
                           Idinte2++;
        }


                                              @{int barID = 0;}

                                @foreach (var value in Model.Bar)
                    {
                        //verdi = Model.Verdier[Idinte2].ProcessValue;

                        barID++;

                     }
                     "Time",
                             "@Model.Verdier[Idinte2-8].Recorded",
                           "@Model.Verdier[Idinte2-7].Recorded",
                            "@Model.Verdier[Idinte2-6].Recorded",
                         "@Model.Verdier[Idinte2-5].Recorded",
                           "@Model.Verdier[Idinte2-4].Recorded",
                            "@Model.Verdier[Idinte2-3].Recorded",
                             "@Model.Verdier[Idinte2-2].Recorded",
                           "@Model.Verdier[Idinte2-2].Recorded",
                            "@Model.Verdier[Idinte2-1].Recorded",
                                            ],
                                        datasets: [{
                                            label: "Reactor Core Temperature",
                                            "fill": false,
                                            backgroundColor: "rgba(0, 0, 0, 1)",
                                            borderColor: "rgba(0,0,0,1)",
                                            pointHitRadius: 50,
                                            yAxisID: "y-axis-0",
                                            "data": [

                      @Model.Verdier[Idinte2-9].ProcessValue,
                             @Model.Verdier[Idinte2-8].ProcessValue,
                           @Model.Verdier[Idinte2-7].ProcessValue,
                            @Model.Verdier[Idinte2-6].ProcessValue,
                         @Model.Verdier[Idinte2-5].ProcessValue,
                           @Model.Verdier[Idinte2-4].ProcessValue,
                            @Model.Verdier[Idinte2-3].ProcessValue,
                             @Model.Verdier[Idinte2-2].ProcessValue,
                           @Model.Verdier[Idinte2-2].ProcessValue,
                            @Model.Verdier[Idinte2-1].ProcessValue,
                                            ]
                                        },

                                        ]
                                    },

                                    options: {

                                        scales: {
                                            yAxes: [{

                                                position: "left",

                                                "id": "y-axis-0",
                                                display: true,
                                                ticks: {
                                                    beginAtZero: true,
                                                    steps: 10,
                                                    stepValue: 5,
                                                    max: 50,
                                                }
                                            }
                                            //, {
                                            //    position: "right",
                                            //    "id": "y-axis-1"
                                            //}
                                            ]
                                        }
                                    }

                                }









                                    );
                                Chart.defaults.global.animationSteps = 50;
                                Chart.defaults.global.tooltipYPadding = 16;
                                Chart.defaults.global.tooltipCornerRadius = 0;
                                Chart.defaults.global.tooltipTitleFontStyle = "normal";
                                Chart.defaults.global.tooltipFillColor = "rgba(0,160,0,0.8)";
                                Chart.defaults.global.animationEasing = "easeOutBounce";
                                Chart.defaults.global.responsive = true;
                                Chart.defaults.global.scaleLineColor = "black";
                                Chart.defaults.global.scaleFontSize = 16;

                                //START PÅ BAR GRAFEN HER///

                                var ctx2 = document.getElementById("chart2").getContext("2d");

                                var myChart2 = new Chart(ctx2, {
                                    responsive: true,

                                    type: "line",


                                    data: {
                                        "labels": [

                                               @{int Idinte3 = 0;}

                                @foreach (var value in Model.Verdier)
                        {


                            Idinte3++;



                         }


                                              @{int barID3 = 0;}

                                @foreach (var value in Model.Bar)
                    {
                                  barID3++;

                     }



                      "Time",
                             "@Model.Verdier[Idinte3-8].Recorded",
                           "@Model.Verdier[Idinte3-7].Recorded",
                            "@Model.Verdier[Idinte3-6].Recorded",
                         "@Model.Verdier[Idinte3-5].Recorded",
                           "@Model.Verdier[Idinte3-4].Recorded",
                            "@Model.Verdier[Idinte3-3].Recorded",
                             "@Model.Verdier[Idinte3-2].Recorded",
                           "@Model.Verdier[Idinte3-2].Recorded",
                            "@Model.Verdier[Idinte3-1].Recorded",
                                        ],
                                        datasets: [{
                                            label: "Reactor Core Pressure",
                                            "fill": false,
                                            backgroundColor: "rgba(0, 0, 0, 1)",
                                            borderColor: "rgba(0,0,0,1)",
                                            pointHitRadius: 50,

                                            yAxisID: "y-axis-0",
                                            "data": [



           @Model.Bar[barID3-10].ProcessValue,
                      @Model.Bar[barID3-9].ProcessValue,
                             @Model.Bar[barID3-8].ProcessValue,
                           @Model.Bar[barID3-7].ProcessValue,
                            @Model.Bar[barID3-6].ProcessValue,
                         @Model.Bar[barID3-5].ProcessValue,
                           @Model.Bar[barID3-4].ProcessValue,
                            @Model.Bar[barID3-3].ProcessValue,

                           @Model.Bar[barID3-2].ProcessValue,
                            @Model.Bar[barID3-1].ProcessValue,
                                            ]
                                        },

                                        //{
                                        //    "label": "Reactor Core  Pressure",
                                        //    "fill": "true",
                                        //    backgroundColor: "rgba(125, 109, 109,0.2)",
                                        //    yAxisID: "y-axis-1",
                                        //    "data": [
                                        //    1.9588,
                                        //    2.1226,
                                        //    2.1392,
                                        //    2.223,
                                        //    1.9048,
                                        //      1.9588,
                                        //    2.1226,
                                        //    2.1392,
                                        //    2.223,
                                        //    1.9048
                                        //    ]
                                        //}
                                        ]
                                    },

                                    options: {

                                        scales: {
                                            yAxes: [{

                                                position: "left",

                                                "id": "y-axis-0",
                                                display: true,
                                                ticks: {
                                                    beginAtZero: true,
                                                    steps: 10,
                                                    stepValue: 5,
                                                    max: 50,
                                                }
                                            }
                                            //, {
                                            //    position: "right",
                                            //    "id": "y-axis-1"
                                            //}
                                            ]
                                        }
                                    }

                                });
                                Chart.defaults.global.animationSteps = 50;
                                Chart.defaults.global.tooltipYPadding = 16;
                                Chart.defaults.global.tooltipCornerRadius = 0;
                                Chart.defaults.global.tooltipTitleFontStyle = "normal";
                                Chart.defaults.global.tooltipFillColor = "rgba(0,160,0,0.8)";
                                Chart.defaults.global.animationEasing = "easeOutBounce";
                                Chart.defaults.global.responsive = true;
                                Chart.defaults.global.scaleLineColor = "black";
                                Chart.defaults.global.scaleFontSize = 16;
                            };
                    </script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.0/Chart.min.js"></script>
                    <canvas id="chart" width="920" height="350"></canvas>


                    };
                    </script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.0/Chart.min.js"></script>
                    <canvas id="chart2" width="920" height="350"></canvas>

                </th>
                <th></th>



                <th></th>



                </th>
                </tr>
                </table>




            </div>
    @*<div class="jumbotron text-center img-responsive" id="jumbotron">
            <div id="jumbotron-header">
                <h4><b>Alarms</b></h4>


                @foreach (var skill in Model.Alarmer)
                {
                    <p>@skill.Description @skill.AlarmOccured @skill.Status @skill.equipments.Tag</p>
                }

            </div>

        </div>*@
